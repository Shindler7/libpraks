{% extends "base.html" %}
{% from "auth/_formshelper.html" import render_field %}

{% block content %}

    {% set profile=True %}
    {% include 'alert_messages.html' %}

    <div>

        <br>
        <h1 class="display-4">
            {{ current_user.nickname }}<small class="text-muted">{% if current_user.isadmin %} администратор{% else %}
            пользователь{% endif %}</small>
        </h1>
        <ul class="list-inline">
            <li class="list-inline-item"><a href="">Переименовать</a></li>
            <li class="list-inline-item"><a href="">Изменить пароль</a></li>
            <li class="list-inline-item"><a href="">Удалить аккаунт</a></li>
        </ul>

    </div>

    <br><br>
    <p class="h4">Персональная подборка</p>

    <div class="row mt-3">
        <div class="col-12">

            {% set cnt = namespace(card = False) %}

            {% if not current_user.content_id.all()|length() %}
                <p>Ничего нет</p>
            {% endif %}

            {% for link in current_user.content_id.all() %}

                {% if loop.changed(link.types_id) %}
                    {% if cnt.card %}</div>{% endif %}
                    <h3><span class="green_color">{{ types[link.types_id]|title }}</span></h3><br>
                    <div class="row row-cols-1 row-cols-md-4">
                    {% set cnt.card = True %}
                {% endif %}

                {% include 'post_item.html' %}

            {% endfor %}
            </div>
        {# Закрытие последней группы карточек #}

        </div>
    </div>



{% endblock %}